@use "sass:map";
@use "sass:list";
@use "@/styles/tools/breakpoints" as breakpoints;
@use "@/styles/tools/helpers" as helpers;
@use "@/styles/settings/core" as core;

@mixin _base($data) {
	$default: map.get($data, "default");

	@if ($default) {
		& {
			@content;
		}
	}
}

@mixin _at($data) {
	$at: map.get($data, "at");

	@if ($at and list.length($at) > 0) {
		@each $viewport in $at {
			&#{core.$class-at-indicator}#{$viewport} {
				@include breakpoints.at($viewport) {
					@content;
				}
			}
		}
	}
}

@mixin _to($data) {
	$to: map.get($data, "to");

	@if ($to and list.length($to) > 0) {
		@each $viewport in helpers.reverse-list($to) {
			&#{core.$class-to-indicator}#{$viewport} {
				@include breakpoints.to($viewport) {
					@content;
				}
			}
		}
	}
}

@mixin _between($data) {
	$between: map.get($data, "between");

	@if ($between and list.length($between) > 0) {
		@each $viewports in $between {
			$at: list.nth($viewports, 1);
			$to: list.nth($viewports, 2);

			&#{core.$class-between-indicator}#{$at}#{core.$class-between-separator}#{$to} {
				@include breakpoints.between($at, $to) {
					@content;
				}
			}
		}
	}
}

@mixin default($data) {
	& {
		@include _base($data) {
			@content;
		}

		@include _at($data) {
			@content;
		}

		@include _to($data) {
			@content;
		}

		@include _between($data) {
			@content;
		}
	}
}
