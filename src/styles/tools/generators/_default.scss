@use "sass:map";
@use "sass:list";
@use "@/styles/tools/breakpoints" as breakpoints;
@use "@/styles/tools/helpers" as helpers;
@use "./config" as config;

@mixin base($data) {
	$default: map.get($data, "default");

	@if ($default) {
		& {
			@content;
		}
	}
}

@mixin at($data) {
	$at: map.get($data, "at");

	@if ($at and list.length($at) > 0) {
		@each $viewport in $at {
			&#{config.$at-indicator}#{$viewport} {
				@include breakpoints.at($viewport) {
					@content;
				}
			}
		}
	}
}

@mixin to($data) {
	$to: map.get($data, "to");

	@if ($to and list.length($to) > 0) {
		@each $viewport in helpers.reverse-list($to) {
			&#{config.$to-indicator}#{$viewport} {
				@include breakpoints.to($viewport) {
					@content;
				}
			}
		}
	}
}

@mixin between($data) {
	$between: map.get($data, "between");

	@if ($between and list.length($between) > 0) {
		@each $viewports in $between {
			$at: list.nth($viewports, 1);
			$to: list.nth($viewports, 2);

			&#{config.$between-indicator}#{$at}#{config.$between-separator}#{$to} {
				@include breakpoints.between($at, $to) {
					@content;
				}
			}
		}
	}
}

@mixin all($data) {
	& {
		@include base($data) {
			@content;
		}

		@include at($data) {
			@content;
		}

		@include to($data) {
			@content;
		}

		@include between($data) {
			@content;
		}
	}
}
